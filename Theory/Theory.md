## 태스크의 형태

### 유형 1. 무한루프 함수

```c
void YourTask(void *pvParameters)
{
	for(;;){
		Call one of FreeRTOS's services:
		vTaskDelay();
		vTaskSuspend();
		vTaskPrioritySet();
		vTaskResume();
	}
}
```

### 유형2. 실행 후 스스로를 삭제하는 함수

```c
void YourTask(void *pvParameters)
{
	vTaskDelete(NULL);
}
```

task는 절대 return하면 안되기 때문에 항상 'void'로 return형을 사용한다. **임베디드 시스템에서 태스크는 '프로그램 그 자체'가 아니라 '시스템이 관리하는 무한 루프 서비스'이다.** tasl가 return한다는 것은 해당 서비스를 관리하는 스택(Stack) 정보와 제어권이 갈 곳을 잃어버린다는 뜻이며, 이는 곧 시스템 크래시(Crash)로 이어진다.

****

## CMSIS
>서로 다른 제조사가 만든 ARM Cortex 기반 칩들을 똑같은 방식으로 제어할 수 있게 만든 표준화된 통역 도구.

- 코어텍스 마이크로 컨트롤러 소프트웨어 인터페이스 표준(CMSIS)으로 ARM CORTEX 프로세서 기반 마이크로 컨트롤러 벤터 독립 하드웨어 추상화 계층이다.
- CMSIS는 일반 도구 인터페이스를 정의하고 일관된 장치 지원을 가능하게 한다.
- CMSIS 소프트웨어 인터페이스는 소프트웨어 재사용을 단순화하고 마이크로 컨트롤러 개발자의 학습 곡선을 줄이며 새로운 장치의 출시 시간을 단축한다.
- CMSIS는 프로세서 및 주변 장치, 실시간 운영체제 및 미들웨어 구성 요소에 대한 인터페이스를 제공한다. CMSIS에는 장치, 보드 및 소프트웨어에 대한 전달 메커니즘이 포함되어 있으며 여러 공급 업체의 소프트웨어 구성 요소를 결합할 수 있다.
### CMSIS의 핵심 구성 요소

- CMSIS는 단순히 하나로 되어 있지 않고, 역할에 따라 여러 층으로 나뉜다.

1. **CMSIS-CORE**: 가장 기본이 되는 부분으로 Cortex-M 프로세서의 코어 레지스터와 인터럽트 컨트롤러(NVIC) 등에 접근하는 인터페이스를 제공한다.
2. **CMSIS-RTOS**: 운영체제(RTOS)를 위한 표준 API이다. 사용자가 FreeRTOS를 쓰든, 다른 OS를 쓰든 동일한 함수 호출로 태스크를 만들 수 있게 해준다.
3. **CMSIS-DSP**: 디지털 신호 처리(복소수 계산, 필터 등)를 위한 고성능 라이브러리이다. ARM 코어의 성능을 최대한 활용하도록 최적화되어 있다.
4. **CMSIS-Driver**: 미들웨어(USB, TCP/IP, Flash 등)와 주변 장치를 연결하는 범용 드라이버 인터페이스이다.
## HAL
>SPL(Standard Peripheral Library)의 중단에 대한 대안으로 등장

- HAL 드라이버는 풍부한 API 세트를 제공하고 애플리케이션 상위 계층과 쉽게 상호 작용하도록 설계되었다.
- 각 드라이버는 가장 일반적인 주변 장치 기능을 포함하는 기능 세트로 구성된다. 각 드라이버의 개발은 드라이버 구조, 기능 및 매개 변수 이름을 표준화하는 공통 API에 의해 주도된다.
- HAL의 가장 큰 장점은 이식성이다.
- 클럭 설정, 핀 muxing, 주변 장치 설정 등을 위한 코드의 생성을 위한 STM32CubeMX 도구와 결합하여 장치 전체에 표준화된 API를 제공함과 동시에 자연스럽게 연동 된다.